var core={screenSize:'xs',bLazy:null,init:function()
{core.changeScreenSize();$(window).resize(core.changeScreenSize);core.bLazy=new Blazy();$.notifyDefaults({placement:{from:'bottom',align:'right'}});$('[data-toggle="tooltip"]').tooltip();$('.show-terms-popup').click(function()
{Helper.popUpTerms();return false;});var labelHolders=$('.labelholder');if(labelHolders.length){labelHolders.labelholder();}
$('a[rel*=external]').click(function()
{window.open(this.href);return false;});$('header .navigation li[data-toggle="dropdown"]').bootstrapDropdownHover({clickBehavior:'disable'});core.activeMenuItems('.header ul li a',true);core.activeMenuItems('.account-menu a',false);core.parentClickable();core.handleAlerts();core.sidebar();$('#header').fixedMenu({delay:0});if(window.location.hash.substr(1)==='complete-profile-modal'){$('#complete-profile-modal').modal('show');}
var selects=$('.selectize:not(.question-input)');if(selects.length){selects.selectize();}},sidebar:function()
{$('.sidebar .toggle-control').click(function(){$(this).parent().find('.toggle-area').slideToggle(400);$(this).toggleClass('toggle-open');});},handleAlerts:function()
{var flash=coreMessages;if(flash.alerts!=''){bootbox.alert(flash.alerts);}
if(flash.notices.length>0){for(i=0;i<flash.notices.length;i++){var notice=flash.notices[i];$.notify(notice.message,{type:notice.type});}}},parentClickable:function()
{$(document).on('click','.clickArea, .click-area',function(event)
{var clickedElement=$(event.target);if(clickedElement.hasClass('ignore-click-area')||clickedElement.parent().hasClass('ignore-click-area')){return;}
var link=($(this).find('a[rel="click"]').attr('href'));if(typeof link!=='undefined'){document.location.href=link;}});},changeScreenSize:function()
{core.screenSize=$('#js-media-query').css('content').replace(/^"(.*)"$/,'$1');var header=$('header');if(core.screenSize=='xs'||core.screenSize=='sm'){header.addClass('mobile');}else{header.removeClass('mobile');}
var headerNavigation=$('header .navigation');if((core.screenSize=='md'||core.screenSize=='lg')&&headerNavigation.is(':hidden')){headerNavigation.removeAttr('style');}},activeMenuItems:function(selector,parent)
{var pathName=window.location.pathname;$('.breadcrumb a').each(function()
{var crumb=$(this).attr('href')
if(typeof crumb==='undefined'){return false;}
crumb=crumb.replace(baseUri,'/');if(crumb!=='/'&&crumb===pathName){$('.navbar-nav li a[href$="'+crumb+'"]').addClass('active');}});$(selector).each(function()
{var asideLink=$(this).attr('href');asideLink=asideLink.replace(baseUri,'/');var byCrumb=false;$('.breadcrumb a').each(function()
{var crumb=$(this).attr('href');if(typeof crumb!=='undefined'){crumb=crumb.replace(baseUri,'/');if(crumb!=='/'&&crumb===asideLink){byCrumb=true;}}});if(pathName!=='/'&&(byCrumb===true||(pathName===asideLink||(pathName==='/'&&asideLink==='')))){if(parent===true){$(this).parent().addClass('active');if($(this).parent().hasClass('dropdown')){$(this).parent().addClass('active');}
if($(this).parent().parent().parent().hasClass('dropdown')){$(this).parent().parent().parent().addClass('active');}}else{$(this).addClass('active');}}});}};var Base={ElTotalCredits:$('.total-credits'),ElTotalCreditsVoucher:$('.total-voucher-credits'),ElTotalCreditsBid:$('.total-bid-credits'),NodeOnConnect:function()
{if(isLoggedIn=='1'){socket.emit('subscribe_user',userID,userIDHash);}
socket.emit('visit',unique);},NodeCreditUpdate:function(data)
{Base.ElTotalCredits.html(number_format((parseInt(data.total)+parseInt(data.voucher_total)),0,',','.'));Base.ElTotalCreditsBid.html(number_format(data.total,0,',','.'));Base.ElTotalCreditsVoucher.html(number_format(data.voucher_total,0,',','.'));},NodeTakePlaceInQueue:function(){console.log('go to queue');window.location=baseUri;},NodeGetAccessFromQueue:function(){console.log('go to site from queue');window.location=baseUri;},NodePlaceInLine:function(placeInLine){$('.place-in-line').html(placeInLine);},NodeMoveUpInLine:function(){var element=$('.place-in-line');var placeInLine=parseInt(element.html());element.html(placeInLine-1);},Init:function()
{}};if(typeof io!='undefined'){var socket=io.connect(wsUrl+':'+wsPort);}else{console.error('Socket.io not loaded');}
socket.on('connect',Base.NodeOnConnect);socket.on('push_credits',Base.NodeCreditUpdate);socket.on('take_place_in_queue',Base.NodeTakePlaceInQueue);socket.on('get_access_from_queue',Base.NodeGetAccessFromQueue);socket.on('place_in_line',Base.NodePlaceInLine);socket.on('move_up_in_line',Base.NodeMoveUpInLine);$(function()
{core.init();});var Helper={confirmAction:null,cancelConfirmAction:null,promptAction:null,cancelPromptAction:null,playlistSelectorSaveAction:null,customFirstAction:null,customSecondAction:null,updateCart:function()
{$.post(baseUri+'order/countorderproducts',function(data){$("#number-of-products").html(data);});},popUpTerms:function()
{$.post(baseUri+'order/terms',function(data){Helper.alert('Algemene voorwaarden',data);});return false;},mustBeLoggedIn:function()
{function mustBeloggedInCallBack(result)
{result=typeof result==='undefined'?null:result;if(result.length>0){window.location.replace(result);}}
return bootbox.dialog({title:'Inloggen',message:'<div class="loginmodal"><p>Log in of maak eenvoudig een account aan.</p><p class="mb-0">Hiermee kun je:</p><ul><li><i class="fa fa-check" ></i> Online het woningdossier inzien</li><li><i class="fa fa-check"></i> Online een bezichtigingsafspraak plannen</li><li><i class="fa fa-check"></i> Online een bod uitbrengen</li></ul></div>',onEscape:null,buttons:{confirm:{label:'Inloggen',className:'btn-default-inverted',callback:function(){mustBeloggedInCallBack(baseUri+'users/login');}},cancel:{label:'Registreren',className:'btn-success',callback:function(){mustBeloggedInCallBack(baseUri+'users/signup');}}}});},addedProductAlert:function()
{var action=function(){window.location="order";};Helper.customAlert('Product toegevoegd','Je kunt dit product afrekenen via de winkelwagen.',action,'Afrekenen',true,null,'Verder winkelen',false);},alert:function(title,msg){$('#alert .modal-title').text(title);$('#alert .modal-body').html(msg);$('#alert').modal('show');},confirm:function(title,msg,action,cancelAction){$('#confirm .modal-title').text(title);$('#confirm .modal-body').html(msg);Helper.confirmAction=function(){$('#confirm').modal('hide');return action();};Helper.cancelConfirmAction=function(){$('#confirm').modal('hide');if(typeof cancelAction=='function'){return cancelAction();}};$('#confirm').modal('show');},prompt:function(title,msg,defaultValue,action,cancelAction){$('#prompt .modal-title').text(title);$('#prompt .modal-body div.message').html(msg);$('#prompt #prompt-value').val(defaultValue);Helper.confirmAction=function(){$('#prompt').modal('hide');return action();};Helper.cancelConfirmAction=function(){$('#prompt').modal('hide');if(typeof cancelAction=='function'){return cancelAction();}};$('#prompt').modal('show');},customAlert:function(title,msg,firstAction,firstBtnTxt,firstIsPrimary,secondAction,secondBtnTxt,secondIsPrimary){$('#custom-alert .modal-title').text(title);$('#custom-alert .modal-body').html(msg);$('#custom-alert button.first').text(firstBtnTxt);$('#custom-alert button.second').text(secondBtnTxt);if(firstIsPrimary==true){$('#custom-alert button.first').addClass('btn-success');}else{$('#custom-alert button.first').addClass('btn-default btn-bootstrap');}
if(secondIsPrimary==true){$('#custom-alert button.second').addClass('btn-success');}else{$('#custom-alert button.second').addClass('btn-default btn-bootstrap');}
Helper.customFirstAction=function(){$('#custom-alert').modal('hide');return firstAction();};Helper.customSecondAction=function(){$('#custom-alert').modal('hide');if(typeof secondAction=='function'){return secondAction();}};$('#custom-alert').modal('show');},unixToDateTime:function timeConverter(UNIX_timestamp){var a=new Date(UNIX_timestamp);var year=a.getFullYear();var month=a.getMonth()+1;var date=a.getDate();var hour=a.getHours();var min=a.getMinutes();var sec=a.getSeconds();return year+'-'+month+'-'+date+' '+hour+':'+min+':'+sec},convertCurrency:function(float){if(defaultCurrencyID!=userCurrencyID){float=parseFloat(float)*parseFloat(userCurrencyRate);}
return float;},getAuctionBuyerCosts:function(bid)
{bid=parseFloat(bid);if(typeof auctionBuyerCosts==='undefined'||auctionBuyerCosts==null){return parseFloat(0);}
var tiers=JSON.parse(auctionBuyerCosts);if(tiers==null||tiers.length==0){return parseFloat(0);}
for(var i=0;i<tiers.length;++i){if(bid>=tiers[i].from&&bid<=tiers[i].to){return parseFloat(tiers[i].value);}}
return parseFloat(0);},getIncrementPrice:function(bid)
{bid=parseFloat(bid);if(typeof incrementPrice==='undefined'||incrementPrice==null){return parseFloat(0);}
var tiers=JSON.parse(incrementPrice);if(tiers==null||tiers.length==0){return parseFloat(0);}
for(var i=0;i<tiers.length;++i){if(bid>=tiers[i].from&&bid<=tiers[i].to){return parseFloat(tiers[i].value);}}
return parseFloat(0);}};