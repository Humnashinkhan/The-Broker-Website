var gaconnector2=function(){function e(){f&&console.debug.apply(console,arguments)}function n(e,n){console.log(e);var t=new XMLHttpRequest;t.open("GET",e,!0),t.send()}function t(e){return new Promise(function(n,t){function o(){var t=new Promise(function(n,t){!function(){window.dataLayer.push(arguments)}("get",q,e,function(e){n(e)})}),r=new Promise(function(e,n){setTimeout(function(){n(new Error("Timeout after 200ms"))},200)});Promise.race([t,r]).then(function(e){e?n(e):setTimeout(o,200)}).catch(function(e){setTimeout(o,200)})}o()})}function o(){var e=document.cookie.split("; ").find(function(e){return e.startsWith("_ga_")});if(e){var n=e.split("=")[0];if(/^_ga_[A-Z0-9]+$/.test(n))return"G-"+n.replace("_ga_","")}return null}function r(){if(window.dataLayer){var n=window.dataLayer.find(function(e){return"config"===e[0]&&e[1].startsWith("G-")});if(n)return e("Found measurement id in dataLayer"),n[1]}if(window.google_tag_data&&google_tag_data.tidr&&google_tag_data.tidr.container){var t=Object.keys(google_tag_data.tidr.container);if(t.length>0){var r=t.find(function(e){return e.startsWith("G-")});if(r)return e("Found measurement id in google_tag_data"),r}}var a=o();return a&&e("Found measurement id in cookie"),e("No measurement id found"),a}function a(){return new Promise(function(n,t){function o(){a++,e("Attempting to get measurement id");var t=r();if(t)n(t);else{if(a>=240)return e("Timeout getting measurement id"),n();setTimeout(o,250)}}var a=0;o()})}function i(){var e=document.cookie.split("; ").find(function(e){return"_ga"===e.split("=")[0]});if(e){var n=e.split("=")[1].split(".");return n[2]+"."+n[3]}return null}function c(){return new Promise(function(n,o){if(!window.gtag&&!window.dataLayer){var r=i();return r&&e("Got client id from cookie (fallback)"),n(r)}t("client_id").then(function(t){e("Got client id from dataLayer"),n(t)}).catch(function(t){var o=i();if(o)return e("Got client id from cookie (error fallback)"),n(o);e("No client id found (error fallback)"),n()})})}function u(){var e=r(),n=document.cookie.split("; ").find(function(n){return n.startsWith("_ga_"+e.replace("G-",""))});if(n){var t=n.split("=");if(2===t.length){var o=t[1].split(".");if(o.length>2){var a=o[2];if(parseInt(a)===new Date(1e3*a).getTime()/1e3)return a}}}return null}function d(){return new Promise(function(n,o){if(!window.gtag&&!window.dataLayer){var r=u();return r?(e("Got session id from cookie (fallback)"),n(r)):n(null)}t("session_id").then(function(t){e("Got session id from dataLayer"),n(t)}).catch(function(t){var o=u();if(o)return e("Got session id from cookie (error fallback)"),n(o);e("No session id found (error fallback)"),n()})})}function f(){return{accountId:F,gaconnectorId:J,gaMeasurementId:q,gaClientId:B,gaSessionId:H}}function l(e){var n=/[-\w]+\.(?:[-\w]+\.xn--[-\w]+|[-\w]{2,}|[-\w]+\.[-\w]{2})$/i,t=e.split("/")[2],o=n.exec(t);if("object"==typeof o&&o instanceof Array&&o.length>0)return o[0]}function s(e){var n=e.match(/:\/\/(www[0-9]?\.)?(.[^/:]+)/i);return null!=n&&n.length>2&&"string"==typeof n[2]&&n[2].length>0?n[2]:null}function g(e,n,t){t=365,console.log("setting cookie "+e);var o=new Date;o.setTime(o.getTime()+24*t*60*60*1e3);var r="expires="+o.toUTCString();document.cookie=e+"="+n+"; "+r+";domain=."+l(document.location.href)+";path=/"}function m(e,n,t){Z?localStorage.setItem(e,n):g(e,n,t)}function h(e){e+="=";for(var n=document.cookie.split(";"),t=0;t<n.length;t++){for(var o=n[t];" "==o.charAt(0);)o=o.substring(1);if(0==o.indexOf(e))return o.substring(e.length,o.length)}return""}function v(e){return Z?localStorage.getItem(e)||h(e):h(e)}function p(e){console.log("deleting value "+e),Z&&localStorage.getItem(e)?localStorage.removeItem(e):m(e,"",0)}function w(e,n){n=void 0===n?document.location.search:n;try{var t=n.match("[?&]"+e+"=([^&]+)");if(t){var o=t[1];return o=o.replace(/\+/g,"%20"),o=decodeURIComponent(o)}return""}catch(e){return""}}function y(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}function _(e){return e}function b(e,n){var t=_(e),o=_(n);-1===X.indexOf(e+"="+n)&&m("gaconnector2_"+t,o)}function I(){for(var e={},n=document.cookie.split("; "),t=0;t<n.length;t++){var o=n[t].split("=")[0],r=n[t].split("=").slice(1).join("=");o.length>13&&"gaconnector2_"==o.substring(0,13)&&(e[o.replace("gaconnector2_","")]=r)}return e}function C(){for(var e=Object.keys(localStorage),n={},t=0;t<e.length;t++)"gaconnector2_"===e[t].substr(0,13)&&(n[e[t].replace("gaconnector2_","")]=localStorage.getItem(e[t]));return n}function S(){return Z?C():I()}function k(){var e=S();for(var n in K){var t=_(K[n]),o=e[t];""!==o&&void 0!==o&&(E(t,o),p("gaconnector2_"+t))}}function E(e,t){if(-1===X.indexOf(e+"="+t)&&""!==J){var o="https://track.gaconnector.com/save_identifier";o+="?gaconnector_id="+J,o+="&account_id="+F,o+="&name="+e,o+="&value_hash="+(t?z(t.toLowerCase()):""),o+="&gamid="+q,o+="&gacid="+B;n(o+="&gasid="+H,function(){X.push(e+"="+t),p("gaconnector2_"+e)})}}function A(e,n){b(e,n),E(e,n)}function L(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)}function j(){for(var e=document.getElementsByTagName("input"),n=0;n<e.length;n++)e[n].getAttribute("data-gaconnector-tracked")||-1===V.indexOf(e[n].type)&&(e[n].setAttribute("data-gaconnector-tracked",!0),e[n].addEventListener("change",function(e){if(L(e.target.value))A("email",e.target.value);else for(var n in Q)for(var t=Q[n],o=0;o<t.length;o++){var r=t[o];(r.test(e.target.name)||r.test(e.target.id))&&A(n,e.target.value)}}))}function R(){var e="https://track.gaconnector.com/track_pageview";""!=document.location.search?(e+=document.location.search,e+="&"):e+="?",e+="gaconnector_id="+J,e+="&account_id="+F,e+="&referer="+encodeURIComponent(document.referrer),e+="&page_url="+encodeURIComponent(window.location.href),e+="&gclid="+encodeURIComponent(w("gclid",window.location.href)),e+="&utm_campaign="+encodeURIComponent(w("utm_campaign",window.location.href)),e+="&utm_term="+encodeURIComponent(w("utm_term",window.location.href)),e+="&utm_content="+encodeURIComponent(w("utm_content",window.location.href)),e+="&utm_source="+encodeURIComponent(w("utm_source",window.location.href)),n(e+="&utm_medium="+encodeURIComponent(w("utm_medium",window.location.href)))}function T(){return self!==top}function G(){for(var e=document.querySelectorAll("iframe"),n=0;n<e.length;n++){var t=e[n].contentWindow,o={gaconnectorId:J,accountId:F,gaMeasurementId:q,gaClientId:B,gaSessionId:H};t.postMessage(o,"*")}}function x(e){"object"==typeof e.data&&void 0!==e.data.gaconnectorId&&(J=e.data.gaconnectorId,F=e.data.accountId,m("gaconnector2_id",J,365),e.data.gaMeasurementId&&(q=e.data.gaMeasurementId),e.data.gaClientId&&(B=e.data.gaClientId),e.data.gaSessionId&&(H=e.data.gaSessionId))}function O(){T()?(console.log("Adding receiveGaConnectorId listener"),window.addEventListener("message",x,!1)):(console.log("Messaging child iframes"),G(),setInterval(G,1e3))}function U(e){var n=e.dataset.originalHref;void 0===n&&(e.dataset.originalHref=e.href,n=e.href);var t;return t=n.indexOf("?")>-1?"&":"?",e.href=n+t+"gaconnectorId="+J,e.href}function W(){for(var e=l(document.location.href),n=s(document.location.href),t=document.getElementsByTagName("a"),o=0;o<t.length;o++){var r=t[o],a=l(r.href),i=s(r.href);Y.indexOf(a)>-1&&a!==e?U(r):Z&&Y.indexOf(i)>-1&&i!==n&&U(r)}}function M(e){document.cookie=e+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;"}function D(e){localStorage.removeItem(e)}function P(e){var n=!!window.localStorage&&!!window.localStorage.setItem,t=!!e&&"localStorage"===e.storageEngine,o=!e||"string"!=typeof e.storageEngine,r=!!e&&!!e.internalDomains&&!!e.internalDomains.length;Z=n&&(t||o&&!r),gaconnector2.useLocalStorage=Z;var a=I(),i=C();if(Z)for(var c in a)a[c]&&!i[c]&&m("gaconnector2_"+c,a[c]),M("gaconnector2_"+c);else for(var c in i)i[c]&&!a[c]&&m("gaconnector2_"+c,i[c]),D("gaconnector2_"+c)}function N(){var e="object"==typeof params&&!0===params.automatedTesting;T()&&!e||(a().then(function(e){(q=e)&&(c().then(function(e){B=e}).catch(function(e){console.error(e)}),d().then(function(e){H=e}).catch(function(e){console.error(e)}))}).catch(function(e){console.error(e)}),R())}function $(n){if(!0===n)f=!0;else try{var t=document.querySelector('script[src*="gaconnector.js"]');t&&"true"===new URL(t.src).searchParams.get("debug")&&(f=!0)}catch(e){console.error(e)}f&&e("GA Connector debugging enabled")}var F,q,B,H,Z=!0,f=!1,z=function(e){function n(e,n){return e>>>n|e<<32-n}function t(e,n){return e>>>n}function o(e,n,t){return e&n^~e&t}function r(e,n,t){return e&n^e&t^n&t}function a(e){return n(e,2)^n(e,13)^n(e,22)}function i(e){return n(e,6)^n(e,11)^n(e,25)}function c(e){return n(e,7)^n(e,18)^t(e,3)}function u(e,n){var t=(65535&e)+(65535&n);return(e>>16)+(n>>16)+(t>>16)<<16|65535&t}var d,f=new Array(1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998);return(d=e,function(e){for(var n,t="0123456789abcdef",o="",r=0;r<e.length;r++)n=e.charCodeAt(r),o+=t.charAt(n>>>4&15)+t.charAt(15&n);return o}(function(e){return function(e){for(var n="",t=0;t<32*e.length;t+=8)n+=String.fromCharCode(e[t>>5]>>>24-t%32&255);return n}(function(e,d){var l,s,g,m,h,v,p,w,y,_,b,I,C=new Array(1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225),S=new Array(64);for(e[d>>5]|=128<<24-d%32,e[15+(d+64>>9<<4)]=d,y=0;y<e.length;y+=16){for(l=C[0],s=C[1],g=C[2],m=C[3],h=C[4],v=C[5],p=C[6],w=C[7],_=0;_<64;_++)S[_]=_<16?e[_+y]:u(u(u(n(k=S[_-2],17)^n(k,19)^t(k,10),S[_-7]),c(S[_-15])),S[_-16]),b=u(u(u(u(w,i(h)),o(h,v,p)),f[_]),S[_]),I=u(a(l),r(l,s,g)),w=p,p=v,v=h,h=u(m,b),m=g,g=s,s=l,l=u(b,I);C[0]=u(l,C[0]),C[1]=u(s,C[1]),C[2]=u(g,C[2]),C[3]=u(m,C[3]),C[4]=u(h,C[4]),C[5]=u(v,C[5]),C[6]=u(p,C[6]),C[7]=u(w,C[7])}var k;return C}(function(e){for(var n=Array(e.length>>2),t=0;t<n.length;t++)n[t]=0;for(t=0;t<8*e.length;t+=8)n[t>>5]|=(255&e.charCodeAt(t/8))<<24-t%32;return n}(e),8*e.length))}(function(e){for(var n,t,o="",r=-1;++r<e.length;)n=e.charCodeAt(r),t=r+1<e.length?e.charCodeAt(r+1):0,55296<=n&&n<=56319&&56320<=t&&t<=57343&&(n=65536+((1023&n)<<10)+(1023&t),r++),n<=127?o+=String.fromCharCode(n):n<=2047?o+=String.fromCharCode(192|n>>>6&31,128|63&n):n<=65535?o+=String.fromCharCode(224|n>>>12&15,128|n>>>6&63,128|63&n):n<=2097151&&(o+=String.fromCharCode(240|n>>>18&7,128|n>>>12&63,128|n>>>6&63,128|63&n));return o}(d)))).toUpperCase()},J=null,X=[],K=["name","email","phone"],Q={name:[/^name$/i,/^user.*name$/i],email:[/email/i],phone:[/phone/i]},V=["color","date","datetime-local","month","number","range","search","time","url","week"],Y=null,ee=function(){function e(){if(!r.isReady){try{document.documentElement.doScroll("left")}catch(n){return void setTimeout(e,1)}r.ready()}}var n,t,o={};o["[object Boolean]"]="boolean",o["[object Number]"]="number",o["[object String]"]="string",o["[object Function]"]="function",o["[object Array]"]="array",o["[object Date]"]="date",o["[object RegExp]"]="regexp",o["[object Object]"]="object";var r={isReady:!1,readyWait:1,holdReady:function(e){e?r.readyWait++:r.ready(!0)},ready:function(e){if(!0===e&&!--r.readyWait||!0!==e&&!r.isReady){if(!document.body)return setTimeout(r.ready,1);if(r.isReady=!0,!0!==e&&--r.readyWait>0)return;n.resolveWith(document,[r])}},bindReady:function(){if(!n){if(n=r._Deferred(),"complete"===document.readyState)return setTimeout(r.ready,1);if(document.addEventListener)document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",r.ready,!1);else if(document.attachEvent){document.attachEvent("onreadystatechange",t),window.attachEvent("onload",r.ready);var o=!1;try{o=null==window.frameElement}catch(e){}document.documentElement.doScroll&&o&&e()}}},_Deferred:function(){var e,n,t,o=[],a={done:function(){if(!t){var n,i,c,u,d,f=arguments;for(e&&(d=e,e=0),n=0,i=f.length;n<i;n++)c=f[n],"array"===(u=r.type(c))?a.done.apply(a,c):"function"===u&&o.push(c);d&&a.resolveWith(d[0],d[1])}return this},resolveWith:function(r,a){if(!t&&!e&&!n){a=a||[],n=1;try{for(;o[0];)o.shift().apply(r,a)}finally{e=[r,a],n=0}}return this},resolve:function(){return a.resolveWith(this,arguments),this},isResolved:function(){return!(!n&&!e)},cancel:function(){return t=1,o=[],this}};return a},type:function(e){return null==e?String(e):o[Object.prototype.toString.call(e)]||"object"}};return document.addEventListener?t=function(){document.removeEventListener("DOMContentLoaded",t,!1),r.ready()}:document.attachEvent&&(t=function(){"complete"===document.readyState&&(document.detachEvent("onreadystatechange",t),r.ready())}),function(e){r.bindReady(),r.type(e),n.done(e)}}();return{track:function(e,n){F=e,$("object"==typeof n&&n.debug),P(n),(J=w("gaconnectorId")||v("gaconnectorId")||v("gaconnector2_id")||y())!==v("gaconnector2_id")&&m("gaconnector2_id",J,365),J=J,void 0!==n&&void 0!==n.iframeEnabled&&!0!==n.iframeEnabled||O(),N(),k(),ee(function(e){j(),setInterval(j,1e3),void 0!==n&&void 0!==(Y=n.internalDomains)&&(W(),setInterval(W,1e3))})},identify:A,getGaMeasurementId:r,getGaProperty:t,getGaClientId:c,getGaSessionId:d,debug:f}}();